:root {
  --bg: #0d0f12;
  --panel: #1a1d24;
  --panel-dark: #14161c;
  --text: #f4f4f7;
  --muted: #9ca3af;
  --accent: #ffd369;
  --accent-dark: #e6b800;
  --danger: #ff5c5c;
  --outline: #2a2d36;
  --shadow: rgba(0,0,0,0.6);
  --success: #7bd389;
}

/* Reset & Base */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; min-height:100vh; display:flex; flex-direction:column;
  background: var(--bg); color:var(--text);
  font-family: "Trebuchet MS", system-ui, sans-serif;
  overflow-x:hidden;
}

/* Parallax + Glow BG */
.bg-parallax{
  position:fixed; inset:-10vmax; z-index:-2; pointer-events:none;
  background:
    radial-gradient(1200px 600px at 85% -10%, #1a2947 0%, transparent 60%),
    radial-gradient(1000px 500px at 10% 110%, #2a183a 0%, transparent 60%);
  transform:translateZ(0);
}
.bg-glow{
  position:fixed; inset:0; z-index:-1; pointer-events:none;
  background: radial-gradient(800px 400px at 70% 30%, rgba(255,211,105,.12), transparent 60%);
  animation: glowShift 10s ease-in-out infinite alternate;
}
@keyframes glowShift{
  from{ filter:hue-rotate(0deg) blur(0px) }
  to{   filter:hue-rotate(25deg) blur(1px) }
}

/* Header */
.topbar{
  display:flex; align-items:center; justify-content:space-between;
  padding:14px 18px;
  background: linear-gradient(180deg, var(--panel-dark), #10131a);
  border-bottom:2px solid var(--outline); box-shadow:0 2px 8px var(--shadow);
}
.topbar h1{ margin:0; font-size:22px; letter-spacing:.3px; }
.topbar-right{ display:flex; gap:8px; align-items:center; }
.pill{ background:var(--panel); padding:4px 12px; border-radius:999px; font-size:14px; border:1px solid var(--outline); color:var(--muted); }
.toggle{ display:flex; align-items:center; gap:6px; font-size:13px; color:var(--muted); user-select:none; }
.toggle input{ accent-color: var(--accent); cursor:pointer; }
.link{ background:none; border:none; cursor:pointer; color:var(--muted) }
.link:hover{ color:var(--danger) }

/* Layout */
.layout{
  flex:1; display:grid; grid-template-columns:1.2fr 1fr; gap:20px; padding:20px; overflow:hidden;
}
.panel{
  background:var(--panel); border:2px solid var(--outline); border-radius:16px; padding:20px;
  box-shadow:0 4px 10px var(--shadow); height:100%; display:flex; flex-direction:column;
}
.shop-panel{ min-height:0 }

/* Resource Card */
.resource-card{ text-align:center; margin-bottom:16px; position:relative; }
.resource-name{ font-size:18px; color:var(--muted) }
.resource-amount{
  font-size:56px; font-weight:800; margin:10px 0 4px; color:var(--accent);
  text-shadow:0 0 10px var(--accent-dark); transition: transform .12s ease;
}
.resource-amount.bump{ transform:scale(1.06) }
.rates{ color:var(--muted); margin-bottom:14px; display:flex; gap:12px; justify-content:center }

/* Button + Ripple */
.primary{
  position:relative; overflow:hidden; font-size:20px; font-weight:800;
  padding:16px 24px; border:none; border-radius:14px; cursor:pointer;
  background:var(--accent); color:#1a1a1a;
  box-shadow:0 4px 10px var(--shadow), 0 0 8px var(--accent-dark);
  transition: transform .1s, background .2s, filter .2s;
}
.primary:hover{ background:var(--accent-dark); filter:brightness(1.02) }
.primary:active{ transform:scale(.96) }
.primary .ripple{
  position:absolute; pointer-events:none; width:12px; height:12px; border-radius:50%;
  background:rgba(255,255,255,.35); transform:translate(-50%,-50%) scale(0);
  animation:ripple .45s ease-out forwards;
}
@keyframes ripple{ to{ transform:translate(-50%,-50%) scale(18); opacity:0 } }

/* Upgrade List scrollt */
.upgrade-list{
  flex:1; min-height:0; overflow-y:auto; padding-right:6px; display:flex; flex-direction:column; gap:12px;
}
.upgrade-list::-webkit-scrollbar{ width:10px }
.upgrade-list::-webkit-scrollbar-track{ background:#1a1d24 }
.upgrade-list::-webkit-scrollbar-thumb{ background:#2a2d36; border-radius:8px }
.upgrade-list::-webkit-scrollbar-thumb:hover{ background:#343946 }

.upgrade-btn{
  background:var(--panel-dark); border:2px solid var(--outline); border-radius:12px; padding:12px;
  cursor:pointer; text-align:left; transition: background .2s, transform .1s, border-color .2s, box-shadow .2s;
}
.upgrade-btn strong{ font-size:16px; color:var(--accent) }
.upgrade-btn span{ display:block; font-size:13px; color:var(--muted) }
.upgrade-btn:hover{ background:#232632; transform:translateY(-2px); border-color:#3a3f4f; box-shadow:0 6px 12px rgba(0,0,0,.35) }
.upgrade-btn:disabled{ opacity:.55; cursor:not-allowed }

/* Milestones */
.milestone{
  margin-top:16px; padding:14px; border-radius:12px; background:var(--panel-dark); border:1px solid var(--outline);
  box-shadow: inset 0 0 0 transparent; transition: box-shadow .25s ease;
}
.milestone.ready{
  box-shadow:0 0 20px rgba(123,211,137,.25), inset 0 0 12px rgba(123,211,137,.15);
}
.milestone h3{ margin:0 0 8px }
progress{ width:100%; height:14px; border-radius:7px; overflow:hidden }
progress::-webkit-progress-bar{ background:#2b2f3a }
progress::-webkit-progress-value{ background:linear-gradient(90deg, var(--success), #b6ffbf) }
progress::-moz-progress-bar{ background:var(--success) }

/* Footer */
.statusbar{ padding:12px 20px; font-size:14px; background:linear-gradient(180deg, #10131a, var(--panel-dark)); border-top:2px solid var(--outline); color:var(--muted) }

/* Floaters & Confetti */
.float{
  position:fixed; pointer-events:none; z-index:9997; font-weight:800; font-size:16px; color:#fff;
  text-shadow:0 2px 8px rgba(0,0,0,.6); animation: floatUp .8s ease-out forwards;
}
.float.small{ font-size:14px; opacity:.8 }
.float.crit{ color:#ff8080; text-shadow: 0 0 8px rgba(255,80,80,.7) }
@keyframes floatUp{
  from{ transform: translate(-50%,-30%) scale(.9); opacity:0 }
  20% { opacity:1 }
  to  { transform: translate(-50%,-120%) scale(1.1); opacity:0 }
}
.confetti{
  position:fixed; width:8px; height:14px; background:#ffd369; z-index:9996; pointer-events:none;
  transform:translate(-50%,-50%) rotate(0deg);
  animation: drop 1.1s ease-in forwards;
}
.confetti.c2{ background:#7bd389 }
.confetti.c3{ background:#60a5fa }
.confetti.c4{ background:#f472b6 }
@keyframes drop{
  from{ opacity:0; transform: translateY(-30px) rotate(0deg) }
  10% { opacity:1 }
  to{ transform: translateY(120vh) rotate(340deg); opacity:0 }
}

/* Screen shake */
.shake{ animation:shake .35s cubic-bezier(.36,.07,.19,.97) both }
@keyframes shake{
  10%,90%{ transform:translate3d(-1px,0,0) }
  20%,80%{ transform:translate3d(2px,0,0) }
  30%,50%,70%{ transform:translate3d(-4px,0,0) }
  40%,60%{ transform:translate3d(4px,0,0) }
}

/* Celebrate flash */
body.celebrate::after{
  content:""; position:fixed; inset:0; pointer-events:none; z-index:9996;
  background: radial-gradient(800px 400px at 50% 30%, rgba(123,211,137,.4), transparent 60%);
  animation: celebrate .9s ease-out forwards;
}
@keyframes celebrate{ 0%{opacity:0} 15%{opacity:1} 100%{opacity:0} }

/* Responsive */
@media (max-width:900px){ .layout{ grid-template-columns:1fr } }
